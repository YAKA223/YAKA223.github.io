import{f as Y,a as R,b as U,G as W,c as q}from"./goods-relevant-d7a9e3c7.js";import{e as M,u as Q}from"./vuex.esm-bundler-3cb7d60a.js";import{b as J}from"./index-73f0c727.js";import{_ as b,e as f,m as L,w as T,o,a,n as D,k as S,b as e,F as x,g as k,d as G,$ as E,r as w,t as _,V as P,U as g,p as H,i as O,P as j,u as y,S as K,c as V,a0 as Z,h as X,N as ee,Q as te}from"./plugin-vue_export-helper-9e9db05b.js";import{G as se}from"./goods-sku-c3868523.js";import{G as oe}from"./goods-item-9255c7ed.js";import{m as F}from"./message-89ab7550.js";import"./index-8929c8ab.js";import"./index-37406977.js";import"./runtime-dom.esm-bundler-3d397fb5.js";import"./xtx-message-42ca877e.js";const ae={class:"goods-image"},ne=["src"],ce={class:"small"},le=["onMouseenter","src"],ie={__name:"goods-image",props:{images:{type:Array,default:()=>[]}},setup(d){const s=f(0),u=f(!1),p=L({left:0,top:0}),l=L({backgroundPositionX:0,backgroundPositionY:0}),i=f(null),{elementX:t,elementY:n,isOutside:r}=J(i);return T([t,n,r],()=>{u.value=!r.value,n.value>100&&n.value<300&&(p.top=`${n.value-100}px`)&&(l.backgroundPositionY=`${-(n.value-100)*2}px`),t.value>100&&t.value<300&&(p.left=`${t.value-100}px`)&&(l.backgroundPositionX=`${-(t.value-100)*2}px`)}),(h,$)=>(o(),a("div",ae,[u.value?(o(),a("div",{key:0,class:"large",style:D([{backgroundImage:`url(${d.images[s.value]})`},l])},null,4)):S("",!0),e("div",{class:"middle",ref_key:"target",ref:i},[e("img",{src:d.images[s.value],alt:""},null,8,ne),u.value?(o(),a("div",{key:0,class:"layer",style:D(p)},null,4)):S("",!0)],512),e("ul",ce,[(o(!0),a(x,null,k(d.images,(I,c)=>(o(),a("li",{key:I,class:G({active:c===s.value})},[e("img",{onMouseenter:m=>s.value=c,src:I,alt:""},null,40,le)],2))),128))])]))}},de=b(ie,[["__scopeId","data-v-ff8cc765"]]);const ue={},re={class:"goods-sales"},_e=E('<li data-v-3b6a1684><p data-v-3b6a1684>销量人气</p><p data-v-3b6a1684>200+</p><p data-v-3b6a1684><i class="iconfont icon-task-filling" data-v-3b6a1684></i>销量人气</p></li><li data-v-3b6a1684><p data-v-3b6a1684>商品评价</p><p data-v-3b6a1684>400+</p><p data-v-3b6a1684><i class="iconfont icon-comment-filling" data-v-3b6a1684></i>查看评价</p></li><li data-v-3b6a1684><p data-v-3b6a1684>收藏人气</p><p data-v-3b6a1684>600+</p><p data-v-3b6a1684><i class="iconfont icon-favorite-filling" data-v-3b6a1684></i>收藏商品</p></li><li data-v-3b6a1684><p data-v-3b6a1684>品牌信息</p><p data-v-3b6a1684>苏宁电器</p><p data-v-3b6a1684><i class="iconfont icon-dynamic-filling" data-v-3b6a1684></i>品牌主页</p></li>',4),pe=[_e];function ve(d,s){return o(),a("ul",re,pe)}const ge=b(ue,[["render",ve],["__scopeId","data-v-3b6a1684"]]);const z=d=>(H("data-v-7f9839d4"),d=d(),O(),d),me={class:"g-name"},fe={class:"g-desc"},he={class:"g-price"},ye={class:"g-service"},$e=z(()=>e("dl",null,[e("dt",null,"促销"),e("dd",null,"12月好物放送，App领券购买直降120元")],-1)),xe=z(()=>e("dt",null,"配送",-1)),be=z(()=>e("dl",null,[e("dt",null,"服务"),e("dd",null,[e("span",null,"无忧退货"),e("span",null,"快速退款"),e("span",null,"免费包邮"),e("a",{href:"javascript:;"},"了解详情")])],-1)),Ce={__name:"goods-name",props:["goods"],setup(d){const s=d,u=f("110000"),p=f("119900"),l=f("110101"),i=f("北京市 市辖区 东城区");if(s.goods.userAddresses){const n=s.goods.userAddresses.find(r=>r.isDefault===1);n&&(u.value=n.provinceCode,p.value=n.cityCode,l.value=n.countyCode,i.value=n.fullLocation)}const t=n=>{console.log(n),u.value=n.provinceCode,p.value=n.cityCode,l.value=n.countyCode,i.value=n.fullLocation};return(n,r)=>{const h=w("XtxCity");return o(),a(x,null,[e("p",me,_(s.goods.name),1),e("p",fe,_(s.goods.desc),1),e("p",he,[e("span",null,_(s.goods.price),1),e("span",null,_(s.goods.oldPrice),1)]),e("div",ye,[$e,e("dl",null,[xe,e("dd",null,[P("至 "),g(h,{fullLocation:i.value,onChange:t},null,8,["fullLocation"])])]),be])],64)}}},ke=b(Ce,[["__scopeId","data-v-7f9839d4"]]);const Ie={class:"goods-detail"},Pe={class:"attrs"},Ge={class:"dt"},Se={class:"dd"},Ne=["src"],Xe={__name:"goods-detial",setup(d){const s=j("goods");return(u,p)=>(o(),a("div",Ie,[e("ul",Pe,[(o(!0),a(x,null,k(y(s).details.properties,l=>(o(),a("li",{key:l.value},[e("span",Ge,_(l.name),1),e("span",Se,_(l.value),1)]))),128))]),(o(!0),a(x,null,k(y(s).details.pictures,l=>(o(),a("img",{key:l,src:l,alt:""},null,8,Ne))),128))]))}},we=b(Xe,[["__scopeId","data-v-15c1d77a"]]);const Be={class:"goods-comment-image"},Le={class:"list"},Te=["onClick"],je=["src"],Ve={key:0,class:"preview"},ze=["src"],De={__name:"goods-comment-image",props:{pictures:{type:Array,default:()=>[]}},setup(d){const s=d,u=f(null);return K(()=>{s.pictures.length<1||(u.value=s.pictures[0])}),(p,l)=>(o(),a("div",Be,[e("div",Le,[(o(!0),a(x,null,k(s.pictures,i=>(o(),a("a",{href:"javascript:;",class:G({active:u.value===i}),onClick:t=>u.value=i,key:i},[e("img",{src:i,alt:""},null,8,je)],10,Te))),128))]),u.value?(o(),a("div",Ve,[e("img",{src:u.value,alt:""},null,8,ze),e("i",{onClick:l[0]||(l[0]=i=>u.value=null),class:"iconfont icon-close-new"})])):S("",!0)]))}},Fe=b(De,[["__scopeId","data-v-8bf5ebfa"]]);const B=d=>(H("data-v-b2fb4b12"),d=d(),O(),d),Ae={class:"goods-comment"},Me={key:0,class:"head"},Ee={class:"data"},He=B(()=>e("span",null,"人购买",-1)),Oe=B(()=>e("span",null,"好评率",-1)),Ye={class:"tags"},Re=B(()=>e("div",{class:"dt"},"大家都在说：",-1)),Ue={class:"dd"},We=["onClick"],qe={class:"sort"},Qe=B(()=>e("span",null,"排序：",-1)),Je={key:1,class:"list"},Ke={class:"user"},Ze=["src"],et={class:"body"},tt={class:"score"},st={class:"attr"},ot={class:"text"},at={class:"time"},nt={class:"zan"},ct=B(()=>e("i",{class:"iconfont icon-dianzan"},null,-1)),lt={__name:"goods-comment",setup(d){const s=f(null),u=j("goods");Y(u.value.id).then(c=>{c.result.tags.unshift({title:"有图",tagCount:c.result.hasPictureCount,type:"img"}),c.result.tags.unshift({title:"全部评价",tagCount:c.result.evaluateCount,type:"all"}),s.value=c.result});const p=f(0),l=c=>{p.value=c;const m=s.value.tags[c];m.type==="all"?(t.hasPicture=null,t.tag=null):m.type==="img"?(t.hasPicture=!0,t.tag=null):(t.hasPicture=null,t.tag=m.title)},i=c=>{t.sortField=c,t.page=1,console.log(t.page)},t=L({page:1,pageSize:10,hasPicture:null,tag:null,sortField:null}),n=f([]),r=f(0);T(t,()=>{R(u.value.id,t).then(c=>{n.value=c.result.items,r.value=c.result.counts})},{immediate:!0});const h=c=>c.reduce((m,C)=>`${m} ${C.name}:${C.nameValue}`,"").trim(),$=c=>c.substr(0,1)+"****"+c.substr(-1),I=c=>{t.page=c};return(c,m)=>{const C=w("XtxPagination");return o(),a("div",Ae,[s.value?(o(),a("div",Me,[e("div",Ee,[e("p",null,[e("span",null,_(s.value.salesCount),1),He]),e("p",null,[e("span",null,_(s.value.praisePercent),1),Oe])]),e("div",Ye,[Re,e("div",Ue,[(o(!0),a(x,null,k(s.value.tags,(v,N)=>(o(),a("a",{key:v.title,href:"javascript:;",class:G({active:p.value===N}),onClick:wt=>l(N)},_(v.title)+"("+_(v.tagCount)+")",11,We))),128))])])])):S("",!0),e("div",qe,[Qe,e("a",{href:"javascript:;",class:G({active:t.sortField===null}),onClick:m[0]||(m[0]=v=>i(null))},"默认",2),e("a",{href:"javascript:;",class:G({active:t.sortField==="createTime"}),onClick:m[1]||(m[1]=v=>i("createTime"))},"最新",2),e("a",{href:"javascript:;",class:G({active:t.sortField==="praiseCount"}),onClick:m[2]||(m[2]=v=>i("praiseCount"))},"最热",2)]),n.value?(o(),a("div",Je,[(o(!0),a(x,null,k(n.value,v=>(o(),a("div",{class:"item",key:v.id},[e("div",Ke,[e("img",{src:v.member.avatar,alt:""},null,8,Ze),e("span",null,_($(v.member.nickname)),1)]),e("div",et,[e("div",tt,[(o(!0),a(x,null,k(v.score,N=>(o(),a("i",{class:"iconfont icon-wjx01",key:N+"s"}))),128)),(o(!0),a(x,null,k(5-v.score,N=>(o(),a("i",{class:"iconfont icon-wjx02",key:N+"k"}))),128)),e("span",st,_(h(v.orderInfo.specs)),1)]),e("div",ot,_(v.content),1),v.pictures.length?(o(),V(Fe,{key:0,pictures:v.pictures},null,8,["pictures"])):S("",!0),e("div",at,[e("span",null,_(v.orderInfo.createTime),1),e("span",nt,[ct,P(_(v.praiseCount),1)])])])]))),128))])):S("",!0),g(C,{total:r.value,pageSize:t.pageSize,currentPage:t.page,onCurrentPage:I},null,8,["total","pageSize","currentPage"])])}}},it=b(lt,[["__scopeId","data-v-b2fb4b12"]]);const dt={class:"goods-tabs"},ut={components:{GoodsDetial:we,GoodsComment:it}},rt=Object.assign(ut,{__name:"goods-tabs",setup(d){const s=f("GoodsDetial"),u=j("goods");return(p,l)=>(o(),a("div",dt,[e("nav",null,[e("a",{class:G({active:s.value=="GoodsDetial"}),href:"javascript:;",onClick:l[0]||(l[0]=i=>s.value="GoodsDetial")},"商品详情",2),e("a",{class:G({active:s.value=="GoodsComment"}),href:"javascript:;",onClick:l[1]||(l[1]=i=>s.value="GoodsComment")},[P("商品评价"),e("span",null,_(y(u).commentCount),1)],2)]),(o(),V(Z(s.value)))]))}}),_t=b(rt,[["__scopeId","data-v-7548f45d"]]);const pt={class:"goods-hot"},vt={key:0},gt={__name:"goods-hot",props:{type:{type:Number,default:1}},setup(d){const s=d,u={1:"24小时热销榜",2:"周热销榜",3:"总热销榜"},p=f([]),l=M();return U({id:l.params.id,type:s.type}).then(i=>{p.value=i.result}),(i,t)=>(o(),a("div",pt,[e("h3",null,_(u[s.type]),1),p.value?(o(),a("div",vt,[(o(!0),a(x,null,k(p.value,n=>(o(),V(oe,{key:n.id,goodsList:n},null,8,["goodsList"]))),128))])):S("",!0)]))}},A=b(gt,[["__scopeId","data-v-a11e4dbf"]]);const mt={},ft={class:"goods-warn"},ht=E('<h3 data-v-fc519ec4>注意事项</h3><p class="tit" data-v-fc519ec4>• 购买运费如何收取？</p><p data-v-fc519ec4> 单笔订单金额(不含运费)满88元免邮费；不满88元，每单收取10元运费。（港澳台地区需满500元免邮费；不满500元，每单收取30元运费) </p><br data-v-fc519ec4><p class="tit" data-v-fc519ec4>• 使用什么快递发货?</p><p data-v-fc519ec4>默认使用顺丰快递发货(个别商品使用其他快递）</p><p data-v-fc519ec4>配送范围覆盖全国大部分地区(港澳台地区除外）</p><br data-v-fc519ec4><p class="tit" data-v-fc519ec4>• 如何申请退货?</p><p data-v-fc519ec4> 1.自收到商品之日起30日内，顾客可申请无忧退货，退款将原路返还，不同的银行处理时间不同，预计1-5个工作日到账； </p><p data-v-fc519ec4>2.内裤和食品等特殊商品无质量问题不支持退货；</p><p data-v-fc519ec4> 3.退货流程： 确认收货-申请退货-客服审核通过-用户寄回商品-仓库签收验货-退款审核-退款完成； </p><p data-v-fc519ec4> 4.因小兔鲜儿产生的退货，如质量问题，退货邮费由小兔鲜儿承担，退款完成后会以现金券的形式报销。因客户个人原因产生的退货，购买和寄回运费由客户个人承担。 </p>',13),yt=[ht];function $t(d,s){return o(),a("div",ft,yt)}const xt=b(mt,[["render",$t],["__scopeId","data-v-fc519ec4"]]);const bt={key:0,class:"xtx-goods-page"},Ct={class:"container"},kt={class:"goods-info"},It={class:"media"},Pt={class:"spec"},Gt={class:"goods-footer"},St={class:"goods-article"},Nt={class:"goods-aside"},Xt={__name:"index",setup(d){const s=Q(),u=()=>{const r=f(null),h=M();return T(()=>h.params.id,()=>{h.fullPath.split("/").indexOf("product")!=-1&&(r.value=null,ee(()=>{q(h.params.id).then(({result:$})=>{r.value=$})}))},{immediate:!0}),r},p=r=>{r.skuId&&(t.value.price=r.price,t.value.oldPrice=r.oldPrice,t.value.inventory=r.inventory),i.value=r},l=()=>{if(i.value&&i.value.skuId){const{skuId:r,specsText:h,inventory:$}=i.value,{name:I,price:c,id:m,mainPictures:C}=t.value;s.dispatch("cart/insertCart",{skuId:r,attrsText:h,stock:$,id:m,name:I,price:c,nowPrice:c,picture:C[0],selected:!0,isEffective:!0,count:n.value}).then(()=>{F({type:"success",text:"加入购物车成功"})})}else F({text:"请选择完整规格"})},i=f(null),t=u(),n=f(1);return te("goods",t),(r,h)=>{const $=w("XtxBreadItem"),I=w("XtxBread"),c=w("xtxNumbox"),m=w("XtxBotton");return y(t)?(o(),a("div",bt,[e("div",Ct,[g(I,null,{default:X(()=>[g($,{to:"/"},{default:X(()=>[P("首页")]),_:1}),g($,{to:`/category/${y(t).categories[1].id}`},{default:X(()=>[P(_(y(t).categories[1].name),1)]),_:1},8,["to"]),g($,{to:`/category/${y(t).categories[1].id}/sub/${y(t).categories[0].id}`},{default:X(()=>[P(_(y(t).categories[0].name),1)]),_:1},8,["to"]),g($,null,{default:X(()=>[P(_(y(t).name),1)]),_:1})]),_:1}),e("div",kt,[e("div",It,[g(de,{images:y(t).mainPictures},null,8,["images"]),g(ge)]),e("div",Pt,[g(ke,{goods:y(t)},null,8,["goods"]),g(se,{goods:y(t),onChange:p},null,8,["goods"]),g(c,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=C=>n.value=C),max:y(t).inventory,label:"数量"},null,8,["modelValue","max"]),g(m,{type:"primary",style:{margin:"20px"},onClick:h[1]||(h[1]=C=>l())},{default:X(()=>[P("加入购物车")]),_:1})])]),g(W,{goodsId:y(t).id},null,8,["goodsId"]),e("div",Gt,[e("div",St,[g(_t),g(xt)]),e("div",Nt,[g(A),g(A,{type:2})])])])])):S("",!0)}}},Ht=b(Xt,[["__scopeId","data-v-faa4fe22"]]);export{Ht as default};
